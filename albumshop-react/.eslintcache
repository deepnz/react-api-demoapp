[{"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/index.js":"1","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/App.js":"2","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Confirmation.js":"3","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Shoppingcart.js":"4","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Header.js":"5","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Eventlist.js":"6","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Eventitem.js":"7","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Shoppingcartitem.js":"8","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/CartStore.js":"9","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/CartReducer.js":"10","/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/UuidStore.js":"11"},{"size":3857,"mtime":1695941716491,"results":"12","hashOfConfig":"13"},{"size":545,"mtime":1612123528000,"results":"14","hashOfConfig":"13"},{"size":271,"mtime":1611956196000,"results":"15","hashOfConfig":"13"},{"size":2165,"mtime":1612970444000,"results":"16","hashOfConfig":"13"},{"size":1922,"mtime":1695934342569,"results":"17","hashOfConfig":"13"},{"size":1006,"mtime":1695940862222,"results":"18","hashOfConfig":"13"},{"size":800,"mtime":1695941186222,"results":"19","hashOfConfig":"13"},{"size":940,"mtime":1612098482000,"results":"20","hashOfConfig":"13"},{"size":154,"mtime":1612044212000,"results":"21","hashOfConfig":"13"},{"size":4407,"mtime":1695941296277,"results":"22","hashOfConfig":"13"},{"size":91,"mtime":1612124016000,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"27"},"1vxnm0d",{"filePath":"28","messages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/index.js",["49","50"],"const express = require(\"express\");\r\nconst cors = require(\"cors\");\r\nconst bodyParser = require(\"body-parser\");\r\n\r\nconst dbfile = \"./data/albumshop.db\";\r\nconst port = 3555;\r\nconst webAppOrigin = \"http://localhost:3000\";\r\nconst pageSize = 6;\r\n\r\nconst sqlite3 = require(\"sqlite3\").verbose();\r\nlet db = new sqlite3.Database(dbfile);\r\n\r\nconst app = express();\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\n\r\nconst jsonParser = bodyParser.json();\r\n\r\napp.use(\r\n    cors({\r\n        origin: webAppOrigin,\r\n        methods: [\"GET\", \"POST\", \"PATCH\", \"DELETE\", \"OPTIONS\"],\r\n        exposedHeaders: [\"X-SESSION-TOKEN\"]\r\n    })\r\n);\r\n\r\napp.get(\"/events\", (req, res) => {\r\n    let sql = \"SELECT * FROM event ORDER BY date ASC\";\r\n    db.all(sql, (err, rows) => {\r\n        if (req.query.page && \r\n            !isNaN(parseInt(req.query.page)) && \r\n            parseInt(req.query.page) > 0) {\r\n            const hasMore = rows.length > pageSize * parseInt(req.query.page); \r\n            rows = rows.slice(pageSize * (parseInt(req.query.page) - 1), pageSize * parseInt(req.query.page));\r\n            res.send({ hasMore: hasMore, rows: rows});\r\n        } else {\r\n            res.send(rows);\r\n        }\r\n    });\r\n});\r\n\r\napp.get(\"/cart\", (req, res) => {\r\n    if (req.header(\"X-SESSION-TOKEN\")) {\r\n        let sql = \"SELECT cartitem.*, event.artist, event.name, event.date, event.price, event.imgUrl FROM cartitem INNER JOIN event ON cartitem.event_id = event.id WHERE uuid = ?\";\r\n        db.all(sql, [req.header(\"X-SESSION-TOKEN\")], (err, rows) => {\r\n            res.send(rows);\r\n        });\r\n    } else {\r\n        res.sendStatus(400).end();\r\n    }\r\n});\r\n\r\napp.post(\"/cart\", jsonParser, (req, res) => {\r\n    if (req.header(\"X-SESSION-TOKEN\") && req.body.id) {\r\n        let sql = \"SELECT COUNT(*) as count FROM cartitem WHERE uuid = ? AND event_id = ?\";\r\n        db.get(\r\n            sql, \r\n            [req.header(\"X-SESSION-TOKEN\"), parseInt(req.body.id)], \r\n            (err, row) => {\r\n                let cnt = row.count;\r\n                if (cnt === 0) {\r\n                    sql = \"INSERT INTO cartitem (uuid, event_id, quantity) VALUES (?, ?, 1)\";\r\n                } else {\r\n                    sql = \"UPDATE cartitem SET quantity = quantity + 1 WHERE uuid = ? AND event_id = ?\";\r\n                }\r\n                db.run(\r\n                    sql,\r\n                    [req.header(\"X-SESSION-TOKEN\"), req.body.id],\r\n                    (err) => {\r\n                        res.sendStatus(200).end();\r\n                    });\r\n            });\r\n    } else {\r\n        res.sendStatus(400).end();\r\n    }\r\n});\r\n\r\napp.patch(\"/cart\", jsonParser, (req, res) => {\r\n    if (req.header(\"X-SESSION-TOKEN\") && \r\n        req.body.id && req.body.quantity) {\r\n        sql = \"UPDATE cartitem SET quantity = ? WHERE uuid = ? AND event_id = ?\";\r\n        db.run(\r\n            sql,\r\n            [req.body.quantity, req.header(\"X-SESSION-TOKEN\"), req.body.id],\r\n            (err) => {\r\n                res.sendStatus(200).end();\r\n            });\r\n    } else {\r\n        res.sendStatus(400).end();\r\n    }\r\n});\r\n\r\napp.delete(\"/cart\", (req, res) => {\r\n    if (req.header(\"X-SESSION-TOKEN\")) {\r\n        if (req.body.id) {\r\n            let sql = \"DELETE FROM cartitem WHERE uuid = ? AND event_id = ?\";\r\n            db.run(sql, [req.header(\"X-SESSION-TOKEN\"), req.body.id], (err) => {\r\n                res.sendStatus(200).end();\r\n            });\r\n        } else {\r\n            let sql = \"DELETE FROM cartitem WHERE uuid = ?\";\r\n            db.run(sql, [req.header(\"X-SESSION-TOKEN\")], (err) => {\r\n                res.sendStatus(200).end();\r\n            });\r\n        }\r\n    } else {\r\n        res.sendStatus(400).end();\r\n    }\r\n});\r\n\r\napp.use((req, res) => {\r\n    res.status(404);\r\n});\r\n\r\napp.listen(port, () => {\r\n    console.log(`API running on port ${port}.`);\r\n});",["51","52"],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/App.js",[],["53","54"],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Confirmation.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Shoppingcart.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Header.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Eventlist.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Eventitem.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/Shoppingcartitem.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/CartStore.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/CartReducer.js",[],"/Users/deepaknalla/ideaprojects/react-api-demoapp/albumshop-react/src/UuidStore.js",[],{"ruleId":"55","severity":2,"message":"56","line":81,"column":9,"nodeType":"57","messageId":"58","endLine":81,"endColumn":12},{"ruleId":"55","severity":2,"message":"56","line":83,"column":13,"nodeType":"57","messageId":"58","endLine":83,"endColumn":16},{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"59","replacedBy":"63"},{"ruleId":"61","replacedBy":"64"},"no-undef","'sql' is not defined.","Identifier","undef","no-native-reassign",["65"],"no-negated-in-lhs",["66"],["65"],["66"],"no-global-assign","no-unsafe-negation"]